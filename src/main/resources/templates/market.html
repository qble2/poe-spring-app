<!DOCTYPE html>
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="https://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<head>
<title>Market</title>
</head>
<body>
	<!-- /* Content of this page will be decorated by the elements of layout.html */ -->
	<section layout:fragment="content">

		<div th:replace="fragments/leagues-frags :: select-league-dropdown-menu"></div>
		<button
			class="outline"
			hx-trigger="click"
			hx-include="#select-league-dropdown-menu-select"
			hx-ext="loading-states"
			data-loading-aria-busy
			th:attr="hx-post=|/market-overviews/table|"
			hx-target="#market-overview-table"
			hx-swap="outerHTML">Reload Market</button>

		<nav>
			<ul class="pagination">
				<li class="page-item">
					<a
						role="button"
						class="page-link"
						th:disabled="${marketOverviewsPage.currentPage == 0}"
						hx-ext="loading-states"
						data-loading-aria-busy
						hx-trigger="click"
						th:attr="hx-get=|/market-overviews/table?page=${marketOverviewsPage.currentPage - 1}|"
						hx-target="#market-overview-table"
						hx-swap="outerHTML">Previous</a>
				</li>
				<!-- 				<li -->
				<!-- 					th:each="page: ${#numbers.sequence(0, marketOverviewsPage.totalPages)}" -->
				<!-- 					class="page-item"> -->
				<!-- 					<a -->
				<!-- 						class="page-link" -->
				<!-- 						th:href="|/market-overviews?page=${page}|" -->
				<!-- 						th:text="${page}"></a> -->
				<!-- 				</li> -->
				<li
					th:text="|Page ${marketOverviewsPage.currentPage} / ${marketOverviewsPage.totalPages}|"></li>
				<li class="page-item">
					<a
						role="button"
						class="page-link"
						th:disabled="${marketOverviewsPage.currentPage == marketOverviewsPage.totalPages}"
						hx-ext="loading-states"
						data-loading-aria-busy
						hx-trigger="click"
						th:attr="hx-get=|/market-overviews/table?page=${marketOverviewsPage.currentPage + 1}|"
						hx-target="#market-overview-table"
						hx-swap="outerHTML">Next</a>
				</li>
			</ul>
		</nav>

		<div
			th:replace="fragments/market-frags :: market-overview-table(marketOverviewsPage=${marketOverviewsPage})"></div>

	</section>
</body>
</html>